<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybaselectByUsernametiselectUsers.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wision.mapper.ProdMapper">
    <select id="ruleList" resultType="com.wision.entity.RuleListVo" >
        select a.prod_id,a.prod_type,a.prod_name,a.prod_ver,a.prod_link,a.prod_explain,date_format(a.prod_time,'%Y-%m-%d') as prod_time
        ,a.prod_state from t_supp_prod_main a where prod_state not in ('下架','作废')
        <if test="params.prodType!=null and params.prodType!=''">
            and a.prod_type = #{params.prodType}
        </if>
        <if test="params.prodName!=null and params.prodName!=''">
            and a.prod_name like #{params.prodName} '%'
        </if>
        <if test="params.prodState!=null and params.prodState!=''">
            and a.prod_state = #{params.prodState}
        </if>
        order by a.prod_time desc
    </select>
    <select id="ruleDet" resultType="com.wision.entity.RuleDetVo" >
        select a.prod_id,a.prod_type,a.prod_name,a.prod_nikname,a.prod_ver,a.prod_explain,a.prod_state from t_supp_prod_main a where a.prod_id=#{prodId}
    </select>
</mapper>