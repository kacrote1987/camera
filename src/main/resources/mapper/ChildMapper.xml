<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybaselectByUsernametiselectUsers.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wision.mapper.ChildMapper">
    <select id="getChildName" resultType="String" >
        select prod_name from t_supp_prod_main where prod_id=#{prodId}
    </select>
    <select id="getChildMenu" resultType="com.wision.entity.ChildMenuVo" >
        select menu_id,menu_name,tool_page from t_supp_menu_main where prod_id=#{prodId}
    </select>
    <select id="getTblSel" resultType="com.wision.entity.ChildTblCol" >
        select b.tool_code as field,b.tool_name as title from t_supp_relat_main a inner join t_supp_relat_ext b
        on a.relat_id=b.relat_id where a.menu_id=#{menuId} and a.layout_type='主表'
        <if test="res!=null and res!=''">
            and b.res_state=1
        </if>
        <if test="sel!=null and sel!=''">
            and b.sel_state=1
        </if>
    </select>
    <select id="getRealPage" resultType="String" >
        select CONCAT(prod_id,'_',real_page) as real_page from t_supp_menu_main where menu_id=#{menuId}
    </select>
    <select id="getMainCont" resultType="com.wision.entity.MainContVo" >
        select * from ${tblName}
    </select>
</mapper>